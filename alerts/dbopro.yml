groups:

###################################################################
# DBO PRO
###################################################################

  - name: DBOPRO
    rules:

    - alert: OpenshiftFailedStartContainers
      annotations:
        description: Problem on {{$labels.namespace}} {{$labels.pod}} {{$labels.reason}}.
      expr: sum(
          kube_pod_container_status_waiting_reason { 
          reason=~"CrashLoopBackOff|ErrImagePull|CreateContainerConfigError|ImagePullBackOff|Init:CrashLoopBackOff", namespace=~"pro-test-dbopro|pro-cert-dbopro|pro-prod-dbopro"} > 0
        ) by (origin_prometheus, namespace, pod, reason)
      labels: 
        severity: high

    - alert: OpenshiftContainersRestart
      annotations:
        description: Warning!!! Pod {{$labels.pod}} {{$labels.namespace}}  was restarted..
      for: 10m
      expr: sum(
          increase(
          kube_pod_container_status_restarts_total { namespace ="pro-prod-dbopro" } [15m]
          ) > 0
        ) by (origin_prometheus, namespace, pod)
      labels:
        severity: high
